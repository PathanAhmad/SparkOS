<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feb W1 Report</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 20px;
      background: #fff;
      color: #333;
      line-height: 1.6;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px;
    }
    header, section, footer {
      margin-bottom: 2em;
    }
    header h1 {
      font-size: 2.5em;
      margin: 0 0 10px;
    }
    header p {
      font-size: 1.2em;
      margin: 0;
    }
    h2 {
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.5em;
      margin-bottom: 1em;
    }
    h3 {
      margin-top: 1.5em;
      margin-bottom: 0.5em;
    }
    ul {
      padding-left: 1.5em;
      margin-bottom: 1em;
    }
    pre {
      background: #f5f5f5;
      padding: 15px;
      overflow-x: auto;
      white-space: pre-wrap;
      margin: 15px 0;
      border-radius: 4px;
    }
    .tldr {
      background: #eef;
      padding: 20px;
      border-left: 4px solid #66f;
      margin-bottom: 1em;
    }
    /* Print adjustments */
    @media print {
      body {
        padding: 0;
      }
      .container {
        padding: 20mm;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <h1>Feb W1 Report</h1>
      <p>Hi Sara. Schema and auth backend is complete and Course content code from our Nov MVP is what I was editing so I can integrate it into this, but I wanna make sure it doesn't conflict anything. BUT, I'll be helping Subodh set up the UI first, so he can work alongsides. Also, lmk if you like this format and if you want me to attach code files. I've done things slightly differently.</p>
    </header>

    <!-- What I Built -->
    <section>
      <h2>What I Built</h2>
      <p>I developed a role-based user system that enforces a clear hierarchy:</p>
      <ul>
        <li><strong>Admin:</strong> Automatically approved and can approve anyone.</li>
        <li><strong>SchoolGroup:</strong> Approves Schools and any Teachers/Students linked to those Schools.</li>
        <li><strong>School:</strong> Approves Teachers or Students tied to that School.</li>
        <li><strong>Teacher:</strong> Approves Students in the same School.</li>
        <li><strong>Student:</strong> Only attends classes, no approval rights.</li>
      </ul>
      <p>This structure ensures that everyone in Spark OS has a clear chain of command, preventing invalid signups and keeping data organized.</p>
    </section>

    <!-- Why It Matters -->
    <section>
      <h2>Why It Matters</h2>
      <h3>Security &amp; Validation</h3>
      <p>No one can create a Teacher or Student account without a legitimate School. Schools require an approved SchoolGroup, and only an Admin can set up a SchoolGroup.</p>
      <h3>Simple Approvals</h3>
      <p>When a Student signs up, the system checks their School. If the School is valid and approved, then a School or Teacher can quickly approve the Student, ensuring no orphaned accounts.</p>
      <h3>Clear Logins</h3>
      <p>Users log in with their email or username and password. The system handles roles and validations behind the scenes while keeping the login process straightforward.</p>
    </section>

    <!-- How It Works (Pseudo Code) -->
    <section>
      <h2>How It Works (Pseudo Code)</h2>
      <pre><code>
REGISTER_USER(email, username, password, role, references):
  1. Validate input fields.
  2. For 'school' role, confirm a valid, approved schoolGroup.
  3. For 'teacher' or 'student' role, confirm a valid, approved school.
  4. Securely hash the password.
  5. Set status: 'approved' if admin; otherwise 'pending'.
  6. Save the user record.

LOGIN_USER(login, password):
  1. Find user by email or username.
  2. Compare given password with stored hash.
  3. Generate and return a JWT token indicating the user's role.

APPROVE_USER(approver, userIdToApprove):
  1. Ensure user is in a 'pending' state.
  2. Validate that the approver has permission (admin, or within the same school/schoolGroup).
  3. Mark the user as 'approved'.
      </code></pre>
    </section>

    <!-- Why I Chose This Design -->
    <section>
      <h2>Why I Chose This Design</h2>
      <ul>
        <li><strong>Keeps control:</strong> Each role has a defined scope of approval.</li>
        <li><strong>Scales easily:</strong> The hierarchy is robust for adding new roles or features.</li>
        <li><strong>Reduces errors:</strong> Prevents "floating" accounts that don't belong anywhere.</li>
      </ul>
    </section>

    <!-- Final Thoughts -->
    <section>
      <h2>Final Thoughts</h2>
      <p>Now that the hierarchical approvals are up and running, we can onboard new users at each level without the risk of unauthorized signups or tangled data.</p>
      <p>If anything is unclear or you want more details, just let me know.</p>
      <p>Also, I'm curious if this report gives enough insight into the work I put inâ€”it was a solid effort!</p>
    </section>

    <!-- Pseudo Code Summary of Key Files -->
    <section>
      <h2>Key Components (Pseudo Code Overview)</h2>
      <h3>User Model</h3>
      <pre><code>
// Define user fields: username, email, password, role, name, status, and hierarchy references.
// Additional fields for students: date of birth, XP, streak, and last active date.
      </code></pre>

      <h3>Authentication Controller</h3>
      <pre><code>
// For registration:
//   - Validate input.
//   - Check for existing users.
//   - Validate hierarchy references.
//   - Hash password and set status.
//   - Create and save user.
// For login:
//   - Locate user by email/username.
//   - Verify password and return JWT token.
// For approvals:
//   - Check pending status.
//   - Validate approver's permissions based on role and hierarchy.
//   - Approve user if valid.
      </code></pre>

      <h3>Middleware & Server Setup</h3>
      <pre><code>
// Middleware checks for a valid JWT token and attaches user info to the request.
// Server connects to the database, sets up JSON parsing, and defines routes for authentication.
      </code></pre>
    </section>

    <!-- Footer -->
    <footer>
      <p>&copy; 2025 Spark OS. All rights reserved.</p>
    </footer>
  </div>
</body>
</html>
